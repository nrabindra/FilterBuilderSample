<!doctype html>
<html ng-app="abandonedItemApp">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.min.js"></script>
    <!-- <link rel="stylesheet" href="items.css"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  </head>
  <body>
    
    <div ng-controller="ItemController" class="container">
    <h2>Hello <b>ATAles!</b></h2>
    <h3>Here is a list of Abandoned Items from Carts:</h3>
     <div class="row">
        <div ng-repeat="product in list" class="col-sm-9">
          <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{product.data.title}}</h5>                
              <p class="card-text">
                <b>{{product.data.vendor}}</b> <small>{{product.data.description}}</small>
                <a href="#" ng-click="getCustomers($index, product.info)" ng-show="!product.showCustomers" class="btn btn-primary float-right">
              View {{product.info.length}} Customer<span ng-show="product.info.length>1">s</span></a>
              <a href="#" ng-click="hideCustomers($index)" ng-show="product.showCustomers" class="btn btn-primary float-right">Hide</a>

              </p>
              
              <br>
              <ul class="list-group list-group-flush" ng-show="product.showCustomers">
                <li class="list-group-item" ng-repeat="customer in product.customers">{{customer.first_name}} {{customer.last_name}} <small ng-show="!customer.opt_in_status"> (opted out)</small></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="/controllers/itemController.js"></script>
  </body>
</html>